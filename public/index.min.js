const textArea=document.querySelector("textarea"),result=document.getElementById("result"),copyButton=document.getElementById("copyBtn"),tooltip=document.getElementById("myTooltip"),separators=document.querySelectorAll(".separators input[type=checkbox]"),removers=document.querySelectorAll(".removers input[type=checkbox]"),checkboxes=document.querySelectorAll("input[type=checkbox]"),customSeparator=document.getElementById("customSeparator"),customSeparatorInput=document.getElementById("customSeparatorInput"),customRemover=document.getElementById("customRemover"),customRemoverInput=document.getElementById("customRemoverInput"),convertToArray=e=>{let t="",o=[];return separators.forEach(e=>{e.checked&&(t.length&&(t+="|"),t+=e.value)}),o=e.split(new RegExp(t)).filter(e=>e.length),removers.forEach(e=>{e.checked&&(o="empty"===e.value?o.filter(e=>e.length>0):o.filter(t=>t!==e.value))}),o},renderResult=e=>result.textContent=e.length?JSON.stringify(convertToArray(e)):"[]";textArea.addEventListener("input",e=>{renderResult(e.target.value)}),checkboxes.forEach(e=>{e.addEventListener("change",()=>{textArea.value.length&&renderResult(textArea.value)})}),customSeparatorInput.addEventListener("input",e=>{const{value:t}=e.target;customSeparator.value=t,customSeparator.checked&&(t.length?textArea.value.length&&renderResult(textArea.value):customSeparator.click()),customSeparator.disabled=!t.length}),customRemoverInput.addEventListener("input",e=>{const{value:t}=e.target;customRemover.value=t,customRemover.checked&&(t.length?textArea.value.length&&renderResult(textArea.value):customRemover.click()),customRemover.disabled=!t.length});const copyResult=()=>{var e=document.createRange();e.selectNode(result),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges(),tooltip.innerHTML="Copied!"},outFunc=()=>tooltip.innerHTML="Copy to clipboard";copyButton.addEventListener("click",copyResult),copyButton.addEventListener("mouseout",outFunc);